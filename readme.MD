# Backend Challenge Shipay

## Feito Por:
**Artur Valladares Hernandez Giacummo**

## VisÃ£o Geral

Este projeto tem como objetivo estruturar uma API REST em Python para resolver os exercÃ­cios 3, 4 e 5 propostos no desafio da Shipay.

## ğŸ§© Endpoints DisponÃ­veis

### Criar UsuÃ¡rio
**POST** `/user`  
Body (JSON):
```json
{
  "name": "string",
  "email": "string",
  "roleId": int,
  "password": "string (opcional)"
}
```
- Se a senha nÃ£o for fornecida, serÃ¡ gerada automaticamente.
- Retorna se conseguiu cirar o usuario ou nÃ£o

### Obter Role de um UsuÃ¡rio
**GET** `/user/{userId}/roles`  
- ForneÃ§a o ID do usuÃ¡rio na URL.
- Retorna todos os `role_id` do usuÃ¡rio correspondente.

---

## ğŸ—‚ï¸ Estrutura do Projeto

```
Desafio-Backend-Shipay/
â”‚
â”œâ”€â”€ Controller/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ UserController.py
â”‚
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ Base.py
â”‚   â”œâ”€â”€ Claim.py
â”‚   â”œâ”€â”€ RequestResponse.py
â”‚   â”œâ”€â”€ Role.py
â”‚   â”œâ”€â”€ User.py
â”‚   â””â”€â”€ UserClaim.py
â”‚
â”œâ”€â”€ Repository/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ DatabaseRepository.py
â”‚
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ UserService.py
â”‚
â”œâ”€â”€ Utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ Logger.py
â”‚   â””â”€â”€ StartDataBase.py
â”‚
â”œâ”€â”€ main.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env
â””â”€â”€ README.md
```

---

## âš™ï¸ Como Rodar o Projeto

### 1. Configurar Banco de Dados PostgreSQL

1. Baixe o PostgreSQL: https://www.enterprisedb.com/downloads/postgres-postgresql-downloads  
2. Siga o instalador padrÃ£o e **anote sua senha e porta escolhidas**.
2.1 Na pagina "Setup - PostgresSQL", clique em "Next"
2.2 Na pagina "Installation Directory", escolha o que mais te agrade, ou mantenha o padrÃ£o, entÃ£o clique em "Next"
2.3 Na pagina "Select Components", nÃ£o mude nada e clique em Next"
2.5 Na pagina "Data Directory", scolha o que mais te agrade, ou mantenha o padrÃ£o, entÃ£o 
2.5 Na pagina "Password", digite a senha que gostaria para que seu usuario possa acessar o bannco. **IMPORTANTE: Guarde essa senha, pois vamos usalÃ¡ mais tarde**
2.6 Na pagina "Port", escolha a porta que gostaria que o Postgres usasse, ou mantenha a padrÃ£o (5432), entÃ£o clique em "Next" **IMPORTANTE: Guarde essa senha, pois vamos usalÃ¡ mais tarde**
2.7 Na pagina "Advanced Options" clique em "Next"
2.8 Na pagina "Pre Installation Summary" clique em ""Next"
2.9 Na pagina "Ready to Install" clique em "Next"
2.10 Aguarde a instalaÃ§Ã£o finalizar
2.11 Na pagina "Completing the PostgresSQL Setup Wizard", pode desmarcar o radio e entÃ£o clicar em "Finish"
3. VocÃª pode usar o banco `postgres` padrÃ£o ou criar um novo.

ğŸ“º *Dica*: [Veja esse vÃ­deo passo-a-passo](https://www.youtube.com/watch?v=4qH-7w5LZsA)

### 2. Configurar o Ambiente Python

1. Clone o projeto usando a linha de comando
```
git clone https://github.com/arturstaation/Desafio-Backend-Shipay.git
```

2. Crie um arquivo `.env` na raiz do projeto com o seguinte conteÃºdo:

```env
DATABASE_URL=postgresql://<usuario>:<senha>@<host>:<porta>/<database>
```

3. Substitua os campos conforme abaixo:

| Campo        | DescriÃ§Ã£o                                                                 |
|--------------|---------------------------------------------------------------------------|
| `<usuario>`  | Nome de usuÃ¡rio do seu banco de dados PostgreSQL.                         |
| `<senha>`    | Senha do usuÃ¡rio do banco.                                                |
| `<host>`     | EndereÃ§o do servidor (por exemplo: `localhost` ou um IP como `127.0.0.1`).|
| `<porta>`    | Porta do PostgreSQL (geralmente `5432`).                           |
| `<database>` | Nome do banco de dados que vocÃª criou (ex: `Teste`).                      |

Exemplo real:
```env
DATABASE_URL=postgresql://postgres:123@localhost:5432/Teste
```

4. Instale as dependÃªncias:
```bash
pip install -r requirements.txt
```

5. Execute a aplicaÃ§Ã£o:
```bash
python main.py
```

---

## ğŸ“Œ ObservaÃ§Ãµes

- As tabelas sÃ£o criadas automaticamente com base nos modelos definidos em `Models/`.
- Antes de realizar os testes, foi populada a tabela `roles` , ja que a tabela `users` usa uma chave estrangeira da tabela anterior. Exemplos:
---

## ğŸ§ª Testes

- Para testar, use o **Insomnia**, **Postman** ou qualquer ferramenta de requisiÃ§Ãµes HTTP.

---
